{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="welcome-card">
    {% if user.is_authenticated %}
        {% if user.profile.is_profile_complete %}
            <div style="display: flex; align-items: center; justify-content: center; gap: 1rem; margin-bottom: 1.5rem;">
                <div class="user-avatar" style="width: 80px; height: 80px; border: 3px solid #e5e7eb; overflow: hidden;">
                    <img 
                        src="{% static 'images/profiles/' %}{{ user.profile.profile_image }}"
                        alt="{{ user.profile.get_profile_image_display }}"
                        style="width: 80px; height: 80px; object-fit: cover;"
                        onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';"
                    >
                    <!-- 이미지 로드 실패시 기본 아바타 -->
                    <div style="display: none; width: 80px; height: 80px; background: linear-gradient(135deg, #6366f1, #8b5cf6); color: white; font-size: 2rem; align-items: center; justify-content: center; font-weight: bold;">
                        {{ user.profile.display_name|first|upper }}
                    </div>
                </div>
            </div>
            <h1>안녕하세요, {{ user.profile.display_name }}님!</h1>
            <p>오늘은 어떤 기분이신가요?<br>
            감정 상태에 맞는 맞춤형 콘텐츠를 추천해드릴게요.</p>
            
            <!-- 오늘의 감정 선택 섹션 -->
            <div style="margin: 2.5rem 0;">
                <a href="{% url 'emotions:emotion_selection' %}" 
                   style="display: inline-flex; align-items: center; gap: 0.75rem; padding: 1.25rem 2.5rem; background: linear-gradient(135deg, #6366f1, #8b5cf6); color: white; text-decoration: none; border-radius: 1rem; font-weight: 600; font-size: 1.1rem; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(99, 102, 241, 0.3);"
                   onmouseover="this.style.transform='translateY(-3px)'; this.style.boxShadow='0 8px 25px rgba(99, 102, 241, 0.4)';"
                   onmouseout="this.style.transform='translateY(0px)'; this.style.boxShadow='0 4px 15px rgba(99, 102, 241, 0.3)';">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <circle cx="12" cy="12" r="10"/>
                        <path d="M8 14s1.5 2 4 2 4-2 4-2"/>
                        <line x1="9" y1="9" x2="9.01" y2="9"/>
                        <line x1="15" y1="9" x2="15.01" y2="9"/>
                    </svg>
                    오늘의 감정 상태 선택하기
                </a>
            </div>
            
            <!-- 기존 상태 카드들 -->
            <div style="margin-top: 2.5rem; display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem;">
                <div style="padding: 1.5rem; background-color: #f0f9ff; border-radius: 0.75rem; border: 1px solid #bfdbfe;">
                    <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#3b82f6">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        </svg>
                        <p style="color: #3b82f6; font-weight: 600; font-size: 1rem;">프로필 완성</p>
                    </div>
                    <p style="color: #64748b; font-size: 0.95rem;">닉네임과 프로필 이미지 설정이 완료되었습니다!</p>
                </div>
                
                <div style="padding: 1.5rem; background-color: #f0fdf4; border-radius: 0.75rem; border: 1px solid #bbf7d0;">
                    <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#10b981">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"/>
                        </svg>
                        <p style="color: #10b981; font-weight: 600; font-size: 1rem;">감정 분석 준비</p>
                    </div>
                    <p style="color: #64748b; font-size: 0.95rem;">오늘의 기분을 선택하고 맞춤 콘텐츠를 받아보세요!</p>
                </div>
                
                <div style="padding: 1.5rem; background-color: #fef3c7; border-radius: 0.75rem; border: 1px solid #fbbf24;">
                    <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#f59e0b">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                        </svg>
                        <p style="color: #f59e0b; font-weight: 600; font-size: 1rem;">다음 단계</p>
                    </div>
                    <p style="color: #64748b; font-size: 0.95rem;">바이브라 심리검사를 통해 더 정확한 분석을 받아보세요! (준비 중)</p>
                </div>
            </div>
            
        {% else %}
            <h1>환영합니다!</h1>
            <p>{{ user.email }}님, 프로필 설정을 완료해서 Hungry Jackie를 시작해보세요!</p>
            
            <div style="margin-top: 2rem; padding: 1.5rem; background-color: #fef2f2; border-radius: 0.75rem; border: 1px solid #fecaca;">
                <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#ef4444">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"/>
                    </svg>
                    <p style="color: #ef4444; font-weight: 600; font-size: 1rem;">프로필 설정 필요</p>
                </div>
                <p style="color: #64748b; margin-bottom: 1rem;">맞춤형 콘텐츠 추천을 위해 닉네임과 프로필 이미지를 설정해주세요.</p>
                <a href="{% url 'profiles:setup_profile' %}" 
                   style="display: inline-flex; align-items: center; gap: 0.5rem; padding: 0.75rem 1.5rem; background-color: #ef4444; color: white; text-decoration: none; border-radius: 0.5rem; font-weight: 600; transition: all 0.3s ease;">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                    </svg>
                    프로필 설정하기
                </a>
            </div>
        {% endif %}
    {% else %}
        <h1>Hungry Jackie에 오신 것을 환영합니다!</h1>
        <p>심리검사를 통한 맞춤형 웹툰·웹소설 추천 서비스<br>
        마음이 말라갈 때, 재키가 건네는 이야기 한 모금</p>
        
        <div style="margin-top: 2rem;">
            <a href="{% url 'account_login' %}" 
               style="display: inline-flex; align-items: center; gap: 0.5rem; padding: 1rem 2rem; background-color: #6366f1; color: white; text-decoration: none; border-radius: 0.75rem; font-weight: 600; transition: all 0.3s ease;">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"/>
                </svg>
                시작하기
            </a>
        </div>
        
        <div style="margin-top: 2rem; padding: 1.5rem; background-color: #f8fafc; border-radius: 0.75rem; border: 1px solid #e2e8f0;">
            <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#10b981">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/>
                </svg>
                <p style="color: #10b981; font-weight: 600; font-size: 0.95rem;">간편한 소셜 로그인</p>
            </div>
            <p style="color: #64748b; font-size: 0.95rem; line-height: 1.5;">
                별도 회원가입 없이 기존 소셜 계정으로 바로 Hungry Jackie를 이용하실 수 있습니다.
            </p>
        </div>
        
        <!-- 서비스 특징 -->
        <div style="margin-top: 2.5rem; display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem;">
            <div style="padding: 1.5rem; background-color: #fef7ff; border-radius: 0.75rem; border: 1px solid #e9d5ff;">
                <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.75rem;">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#a855f7">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/>
                    </svg>
                    <h3 style="color: #a855f7; font-weight: 600; font-size: 1.1rem;">AI 심리 분석</h3>
                </div>
                <p style="color: #64748b; font-size: 0.9rem; line-height: 1.4;">
                    바이브라 이미지 분석을 통해 당신의 감정 상태를 정확히 파악합니다.
                </p>
            </div>
            
            <div style="padding: 1.5rem; background-color: #f0fdfa; border-radius: 0.75rem; border: 1px solid #99f6e4;">
                <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.75rem;">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#10b981">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/>
                    </svg>
                    <h3 style="color: #10b981; font-weight: 600; font-size: 1.1rem;">맞춤형 콘텐츠</h3>
                </div>
                <p style="color: #64748b; font-size: 0.9rem; line-height: 1.4;">
                    감정 상태에 따라 웹툰·웹소설을 생성하고 추천해드립니다.
                </p>
            </div>
            
            <div style="padding: 1.5rem; background-color: #fef3c7; border-radius: 0.75rem; border: 1px solid #fbbf24;">
                <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.75rem;">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#f59e0b">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v4a2 2 0 01-2 2h-2a2 2 0 00-2 2z"/>
                    </svg>
                    <h3 style="color: #f59e0b; font-weight: 600; font-size: 1.1rem;">감정 추적</h3>
                </div>
                <p style="color: #64748b; font-size: 0.9rem; line-height: 1.4;">
                    시간 흐름에 따른 감정 변화를 모니터링하고 개선을 도와드립니다.
                </p>
            </div>
        </div>
    {% endif %}
</div>
{% endblock %}